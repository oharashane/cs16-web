<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/assets/favicon-DRK6xunG.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Loading</title>

    <style>
        body {
            background-color: black;
            margin: 0;
        }

        .notDraggable {
            user-select: none;
            -webkit-user-drag: none;
            pointer-events: none;
        }

        @keyframes pulsate {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0.75;
            }
        }

        @keyframes pulsate-end {
            0% {
                transform: translate(-50%, -50%) scale(0.75);
                opacity: 0.87;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }

        img {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 100vw;
            max-height: 100vh;
            animation-name: pulsate;
            animation-duration: 0.75s;
            animation-iteration-count: infinite;
            animation-direction: alternate;
            z-index: 2;
            transition: opacity ease-in-out 0.5s;
        }

        canvas {
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
        }

        form {
            margin: 0;
            padding: 16px;
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 2;
            display: flex;
            justify-content: space-between;
            color: white;
        }

        #warning {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 3;
            text-align: center;
            color: red;
            opacity: 0;
            transition: opacity ease-in-out 0.5s;
        }
    </style>
  <script type="module" crossorigin src="/assets/main-CqZe0kYo.js"></script>
  <script>
    console.log('üöÄ CS1.6 WebRTC Client Debug Script Loaded');
    
    // Make Module globally accessible and add manual controls
    let moduleFound = false;
    let dataChannelReady = false;
    
    // Check for Module every 500ms
    const moduleChecker = setInterval(() => {
      if (typeof Module !== 'undefined' && !moduleFound) {
        moduleFound = true;
        window.Module = Module; // Make globally accessible
        console.log('‚úÖ Module is now available globally');
        console.log('üéÆ You can now use: Module._Cmd_ExecuteString("command")');
        
        // Add manual connection function
        window.connectToReHLDS = function() {
          if (Module && Module._Cmd_ExecuteString) {
            console.log('üîó Connecting to ReHLDS server...');
            Module._Cmd_ExecuteString('connect 127.0.0.1:27015');
            return 'Connect command sent to 127.0.0.1:27015';
          }
          return 'Module not ready';
        };
        
        // Add console enable function  
        window.enableConsole = function() {
          if (Module && Module._Cmd_ExecuteString) {
            console.log('üéÆ Enabling developer console...');
            Module._Cmd_ExecuteString('developer 1');
            Module._Cmd_ExecuteString('con_enable 1');  
            return 'Console enable commands sent';
          }
          return 'Module not ready';
        };
        
        console.log('üí° Available functions:');
        console.log('  - connectToReHLDS() - Connect to game server');  
        console.log('  - enableConsole() - Try to enable ~ console');
        console.log('  - Module._Cmd_ExecuteString("command") - Send any command');
        
        clearInterval(moduleChecker);
      }
    }, 500);
    
    // Monitor WebRTC DataChannel state
    let originalRTCDataChannel = null;
    if (typeof RTCDataChannel !== 'undefined') {
      console.log('üîó Monitoring WebRTC DataChannel readiness...');
    }
    
    // Stop checking after 30 seconds
    setTimeout(() => {
      clearInterval(moduleChecker);
      if (!moduleFound) {
        console.log('‚ùå Module not found after 30 seconds');
      }
    }, 30000);
  </script>
</head>
<body>
<img id="logo" alt="Logo" class="notDraggable" src="/assets/logo-DTTQpMBv.png"/>
<canvas id="canvas">
</canvas>
<form id="form">
    <label>
        Player name
        <input id="username" type="text" required/>
    </label>
    <button type="submit">
        Start
    </button>
</form>
<p id="warning" class="notDraggable">If it's not starting, try to enable microphone and refresh</p>
</body>
</html>